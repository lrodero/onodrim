<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Onodrim : Onodrim is a Java library that eases the configuration and collection of results of bunches of jobs (experiments, simulations...)." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Onodrim</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/lrodero/onodrim">View on GitHub</a>

          <h1 id="project_title">Onodrim</h1>
          <h2 id="project_tagline">Onodrim is a Java library that eases the configuration and collection of results of bunches of jobs (experiments, simulations...).</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/lrodero/onodrim/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/lrodero/onodrim/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="onodrim" class="anchor" href="#onodrim"><span class="octicon octicon-link"></span></a>Onodrim</h1>

<p>(Contact at <a href="mailto:onodrim.project@gmail.com">onodrim.project@gmail.com</a>, if you use Onodrim please let me know! :) )</p>

<p>Onodrim is a Java library that eases the configuration and collection of results of bunches of jobs (experiments, simulations...). Onodrim is handy when you need to run computations configured using several parameters, where each parameter can have different values, and where even the set of parameters can change. Also it organizes the results to ease their analysis.</p>

<p><strong>The problem:</strong> often, it is not possible to know beforehand which are the parameters that should be configurable, in fact, many times those are discovered as more executions are run and a deeper analysis of results is required. Adding new configurable parameters and/or assigning values to them will require changing (once and again) the code. A pausible solution is to define the parameters in a <code>.properties</code> file. For example:</p>

<div class="highlight"><pre><span class="na">Parameter1</span><span class="o">=</span><span class="s">123</span>
</pre></div>

<p>This way, adding and configuring parameters is easy. However, to iterate through several values to compare the results it would be needed a different <code>.properties</code> value for each configuration of parameters values (for two paramers with 10 values each we would need 100 files), and adding new parameters would force us to re-create <em>all</em> <code>.properties</code> files again and to create new ones.</p>

<p><strong>Onodrim to the rescue:</strong> let's see how Onodrim works with an example. Let's assume we use two parameters with several values each. We will create the following <code>test.properties</code> file</p>

<div class="highlight"><pre><span class="c"># The ; is used to separate parameter values</span>
<span class="na">Parameter1</span><span class="o">=</span><span class="s">123;456;789</span>
<span class="na">Parameter2</span><span class="o">=</span><span class="s">0;1;2;3;4;5;6;7;8;9</span>
</pre></div>

<p>If we run the following code</p>

<div class="highlight"><pre><span class="n">List</span><span class="o">&lt;</span><span class="n">Configuration</span><span class="o">&gt;</span> <span class="n">confs</span> <span class="o">=</span> <span class="n">Onodrim</span><span class="o">.</span><span class="na">buildConfigurations</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">"test.properties"</span><span class="o">));</span>
<span class="k">for</span><span class="o">(</span><span class="n">Configuration</span> <span class="nl">conf:</span> <span class="n">confs</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="na">getIntParameter</span><span class="o">(</span><span class="s">"Parameter1"</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="na">getIntParameter</span><span class="o">(</span><span class="s">"Parameter2"</span><span class="o">);</span>
    <span class="c1">// Your stuff here</span>
<span class="o">}</span>
</pre></div>

<p>then Onodrim will build 30 configurations (<code>org.onodrim.Configuration</code> extends <code>java.util.Properties</code>). Of course this is a very simple example. But imagine now that you decide to configure your tasks with one more parameter. You only will need to change the <code>test.properties</code> file to something like:</p>

<div class="highlight"><pre><span class="na">Parameter1</span><span class="o">=</span><span class="s">123;456;789</span>
<span class="na">Parameter2</span><span class="o">=</span><span class="s">0;1;2;3;4;5;6;7;8;9</span>
<span class="na">Parameter3</span><span class="o">=</span><span class="s">11.1;12.2;13.3</span>
</pre></div>

<p>just as before, Onodrim will generate all the configurations required (90 in this case), but your code will remain (almost) the same! You only need to retrieve the new parameter values</p>

<div class="highlight"><pre><span class="n">List</span><span class="o">&lt;</span><span class="n">Configuration</span><span class="o">&gt;</span> <span class="n">confs</span> <span class="o">=</span> <span class="n">Onodrim</span><span class="o">.</span><span class="na">buildConfigurations</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">"test.properties"</span><span class="o">));</span>
<span class="k">for</span><span class="o">(</span><span class="n">Configuration</span> <span class="nl">conf:</span> <span class="n">confs</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="na">getIntParameter</span><span class="o">(</span><span class="s">"Parameter1"</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="na">getIntParameter</span><span class="o">(</span><span class="s">"Parameter2"</span><span class="o">);</span>
    <span class="kt">double</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="na">getDoubleParameter</span><span class="o">(</span><span class="s">"Parameter3"</span><span class="o">);</span>
    <span class="c1">// Your stuff here</span>
<span class="o">}</span>
</pre></div>

<p><strong>Is that all?</strong> No :) .</p>

<ul>
<li>Onodrim implements several mechanisms (conditional parameter generation, parameters grouping...) that bring a lot of flexibility when defining your experiments configuration.</li>
<li>It also allows to organize the results in handy tables for easy analysis.</li>
<li>Besides, it helps to keep well organized copies of all jobs, their configurations and results. Even more, it can reuse results so it is not needed to run again jobs whose results were already obtained (e.g. in case the execution of some set was interrupter and/or some specific jobs failed). Onodrim takes care of this when you delegate it the execution of jobs (automatic execution), like in the following example:</li>
</ul><div class="highlight"><pre><span class="n">Onodrim</span><span class="o">.</span><span class="na">runJobs</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">"test.properties"</span><span class="o">),</span> <span class="k">new</span> <span class="n">JobImpl</span><span class="o">());</span>
<span class="o">...</span>
<span class="kd">class</span> <span class="nc">JobImpl</span> <span class="kd">implements</span> <span class="n">JobEntryPoint</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">startJob</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Job</span> <span class="n">job</span> <span class="o">=</span> <span class="n">Onodrim</span><span class="o">.</span><span class="na">getCurrentThreadJob</span><span class="o">();</span>
        <span class="n">Configuration</span> <span class="n">conf</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="na">getConfiguration</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">p1</span><span class="o">=</span><span class="mi">0</span><span class="o">,</span><span class="n">p2</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="na">getIntParameter</span><span class="o">(</span><span class="s">"Parameter1"</span><span class="o">);</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="na">getIntParameter</span><span class="o">(</span><span class="s">"Parameter2"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ConfigurationException</span> <span class="n">exception</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">job</span><span class="o">.</span><span class="na">setErrorInExecution</span><span class="o">(</span><span class="s">"Could not read conf: "</span> <span class="o">+</span> <span class="n">exception</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span> <span class="n">exception</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="c1">// Your stuff here; results can be added as follows:</span>
        <span class="n">job</span><span class="o">.</span><span class="na">addResult</span><span class="o">(</span><span class="s">"R1"</span><span class="o">,</span> <span class="n">p1</span><span class="o">*</span><span class="n">p2</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>A more detailed description of how to use Onodrim is available in the <a href="https://github.com/lrodero/onodrim/wiki">Onodrim wiki in github</a>.</p>

<h1>
<a name="requirements-download--installation" class="anchor" href="#requirements-download--installation"><span class="octicon octicon-link"></span></a>Requirements, Download &amp; Installation</h1>

<p>Onodrim requires Java v1.6 (at least). Also, <a href="http://ant.apache.org/%20(v1.6.0%20at%20least">Ant</a> will be handy to compile the source code and generate its Javadoc documentation.</p>

<p><strong>Cloning through git</strong> A git repository of Onodrim is available in <a href="https://github.com/lrodero/onodrim">github</a>. You can clone to get Onodrim sources and then compile them by running the following commands:</p>

<div class="highlight"><pre><span class="nv">$ </span>git clone git://github.com/lrodero/onodrim.git
<span class="nv">$ </span><span class="nb">cd </span>onodrim
<span class="nv">$ </span>ant
</pre></div>

<p>this will compile the source in the <code>src</code> folder and store the compiled classes in <code>bin</code>, it will generate the Javadoc API documentation in <code>doc</code>, and it will create three <code>.jar</code> files with the class files, documentation and source.</p>

<p><strong>In a .zip archive</strong> You can also download a <code>.zip</code> file containing Onodrim sources. Just run the following commands:</p>

<div class="highlight"><pre><span class="nv">$ </span>get https://github.com/lrodero/onodrim/archive/master.zip
<span class="nv">$ </span>unzip master.zip
<span class="nv">$ </span><span class="nb">cd </span>onodrim-master
<span class="nv">$ </span>ant
</pre></div>

<p>calling to <code>ant</code> will have the same effect as above: compiling sources, generating Javadocs and creating <code>.jar</code> files.</p>

<p><strong>Installation</strong> To use Onodrim it is only needed to add the <code>onodrim-&lt;version&gt;.jar</code> file to the <code>CLASSPATH</code>.</p>

<h1>
<a name="license--contact" class="anchor" href="#license--contact"><span class="octicon octicon-link"></span></a>License &amp; Contact</h1>

<p>Onodrim is distributed under the <a href="http://www.gnu.org/licenses/gpl.html">GPL v3 license</a>.</p>

<p>Also, if you use Onodrim, I'd really appreaciate if you let me know! I'm very interested in knowing who (and how) is using Onodrim in order to improve it. Thus, feedback and comments are welcome :) . You can contact me at <a href="mailto:onodrim.project@gmail.com">onodrim.project@gmail.com</a>. If you find any bug or have any problem please report the issue <a href="https://github.com/lrodero/onodrim/issues">here</a> (or, again, contact me by email). </p>

<h1>
<a name="faq" class="anchor" href="#faq"><span class="octicon octicon-link"></span></a>FAQ</h1>

<p><strong>What does 'Onodrim' mean?</strong> I am a fan of Tolkien works :) ! . Onodrim is <em>"The name given by the Elves to the giant tree-like beings that Men called Ents."</em> (<a href="http://www.glyphweb.com/arda/o/onodrim.html">The Encyclopedia or Arda</a>). As you probably know, and Onodrim/Ent is a shepherd of trees. Similarly, Onodrim is a kind of 'shepherd' of your jobs, as it should help you to organize and herd them. </p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Onodrim maintained by <a href="https://github.com/lrodero">lrodero</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
